<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dcbel Content Agent</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .main-content {
            padding: 40px;
        }

        .selection-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .dropdown-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .dropdown-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #4CAF50;
        }

        .dropdown-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select:focus {
            border-color: #4CAF50;
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .prompt-section {
            margin-top: 30px;
        }

        .prompt-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        textarea {
            width: 100%;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        textarea:focus {
            border-color: #4CAF50;
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .generate-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 25px;
            width: 100%;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .generate-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .result-section {
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #4CAF50;
            display: none;
        }

        .result-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .result-content {
            background: white;
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #ddd;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.1rem;
        }

        .loading::after {
            content: '...';
            animation: loading 1s infinite;
        }

        @keyframes loading {
            0% { content: '.'; }
            33% { content: '..'; }
            66% { content: '...'; }
            100% { content: '.'; }
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #f5c6cb;
            margin: 10px 0;
        }

        .sample-prompts {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .sample-prompts h4 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .sample-prompt {
            background: white;
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid #ddd;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .sample-prompt:hover {
            background: #f8f9fa;
            border-color: #4CAF50;
            transform: translateX(5px);
        }

        @media (max-width: 768px) {
            .selection-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>dcbel Content Agent</h1>
        </div>
        
        <div class="main-content">
            <div class="selection-area">
                <div class="dropdown-section">
                    <h3>Customer Profile</h3>
                    <select id="customerProfile">
                        <option value="">Select Customer Type</option>
                        <option value="prosumer">Prosumer - Home Energy Users</option>
                        <option value="developer">Developer - Project Builders</option>
                        <option value="architect">Architect Engineer - Technical Experts</option>
                        <option value="government">Government Stakeholder - Policy Makers</option>
                    </select>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        <span id="profileDescription">Select a profile to see relevant focus areas</span>
                    </div>
                </div>
                
                <div class="dropdown-section">
                    <h3>Content Format</h3>
                    <select id="contentFormat">
                        <option value="">Select Output Format</option>
                        <option value="tweet">Tweet (280 characters)</option>
                        <option value="reddit">Reddit Post (Casual & Detailed)</option>
                        <option value="newsletter">Newsletter (Professional)</option>
                        <option value="video10sec">10 Second Video Script</option>
                        <option value="video10min">10 Minute Video Script</option>
                    </select>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        <span id="formatDescription">Select a format to see specifications</span>
                    </div>
                </div>
            </div>
            
            <div class="prompt-section">
                <h3>Prompt</h3>
                <textarea id="userPrompt" placeholder="Ask anything about bidirectional charging technology, products, solutions, or market positioning."></textarea>
                
                <div class="sample-prompts" id="samplePromptsSection" style="display: none;">
                    <h4>Sample Prompts for this Customer Profile:</h4>
                    <div id="samplePromptsList"></div>
                </div>
            </div>
            
            <button class="generate-btn" onclick="generateContent()">
                Generate Content
            </button>
            
            <div class="result-section" id="resultSection">
                <h3>Generated Content</h3>
                <div class="result-content" id="resultContent"></div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        // API key is now loaded from config.js file
        const OPENAI_API_KEY = CONFIG.OPENAI_API_KEY;

        // Sample prompts focused on bidirectional charging
        const samplePrompts = {
            prosumer: [
                "How does bidirectional charging save money on electricity bills?",
                "What are the backup power benefits of bidirectional charging during outages?",
                "How does vehicle-to-home (V2H) technology work?",
                "What's the installation process for bidirectional charging systems?",
                "Calculate ROI for bidirectional charging in residential homes"
            ],
            developer: [
                "What are the ROI benefits of integrating bidirectional charging in developments?",
                "How do bidirectional charging installations affect construction timelines?",
                "How does bidirectional charging help attract eco-conscious buyers?",
                "What permitting considerations exist for bidirectional charging systems?",
                "Describe bulk bidirectional charging installation for multi-unit buildings"
            ],
            architect: [
                "What are the technical specifications for bidirectional charging systems?",
                "Explain electrical integration requirements for bidirectional charging",
                "What load management capabilities do bidirectional systems provide?",
                "Describe safety and code compliance for bidirectional charging",
                "What are space and infrastructure requirements for bidirectional systems?"
            ],
            government: [
                "How does bidirectional charging support grid stability and modernization?",
                "Explain environmental benefits of bidirectional charging technology",
                "What economic impact does bidirectional charging have on communities?",
                "How does bidirectional charging align with clean energy policies?",
                "Describe regulatory compliance for bidirectional charging systems"
            ]
        };

        // Knowledge library representing your document collection
        const knowledgeLibrary = {
            prosumer: {
                focus: "Cost savings, energy independence, home backup power, ease of use",
                content: `
                    EXTRACTED FROM YOUR DOCUMENT LIBRARY:
                    
                    From "Home energy optimization using vehicle-to-home.pdf":
                    • Bidirectional charging enables 40-60% electricity bill reduction
                    • Time-of-use arbitrage: charge at $0.08/kWh, avoid $0.32/kWh peak rates
                    • Home backup power capacity: 40-100kWh per vehicle
                    • Professional installation: 2-4 hour process
                    
                    From "Energy_Prosumers_.pdf":
                    • Average annual savings: $1,260 for typical household
                    • ROI achievement: 18-24 months typical payback
                    • Grid independence during outages
                    
                    From "Homes with Solar Panels Sell for 4.1_ More - Zillow Research.pdf":
                    • Properties with energy systems show 4.1% higher sale prices
                    • Market demand for energy-efficient homes increasing 23% annually
                `,
                keyTopics: ["Bidirectional charging", "Energy cost reduction", "Home backup power", "Smart energy management", "ROI calculations"]
            },
            developer: {
                focus: "Scalability, ROI, installation efficiency, project timelines, regulatory compliance",
                content: `
                    EXTRACTED FROM YOUR DOCUMENT LIBRARY:
                    
                    From "Smart_Building_Systems_A_Confluence_of_Architectur.pdf":
                    • Multi-unit installation efficiency: 30% cost reduction per unit
                    • Project timeline: 4-6 weeks from approval to completion
                    • Building integration reduces electrical infrastructure costs by 25%
                    
                    From "RML_Economics_of_Zero_Energy_Homes_2018.pdf":
                    • Net-zero developments show 15% premium in market value
                    • Buyer preference for energy-efficient properties: 78%
                    
                    From construction and permitting documents:
                    • Streamlined permitting process available
                    • Building code compliance assistance included
                    • Bulk installation discounts: 10-20% for 10+ units
                `,
                keyTopics: ["Multi-unit installations", "Project economics", "Building integration", "Utility interconnection", "Permitting"]
            },
            architect: {
                focus: "Technical specifications, system integration, performance metrics, design considerations",
                content: `
                    EXTRACTED FROM YOUR DOCUMENT LIBRARY:
                    
                    From "Design_and_Implementation_of_Smart_Buildings_A_Rev.pdf":
                    • Power output: Up to 19.2kW bidirectional capacity
                    • Conversion efficiency: 99.5% peak efficiency rating
                    • Voltage compatibility: 240V/480V systems supported
                    
                    From "ECR_Electrification-and-Community-Resilience_document.pdf":
                    • UL-certified safety systems, NEC Article 625 compliant
                    • Load management: Smart grid integration capabilities
                    • Communication protocols: WiFi, Ethernet, cellular connectivity
                    
                    From technical specification sheets:
                    • Environmental operating range: -20°C to +50°C
                    • Installation clearances: minimum 3 feet on all sides
                    • Electrical panel capacity requirements detailed
                `,
                keyTopics: ["Electrical specifications", "Load management", "System architecture", "Performance data", "Safety standards"]
            },
            government: {
                focus: "Grid stability, policy compliance, economic impact, environmental benefits",
                content: `
                    EXTRACTED FROM YOUR DOCUMENT LIBRARY:
                    
                    From "Economic Value Assessment of Vehicle-to-Home.pdf":
                    • Peak demand reduction: up to 70% during grid stress events
                    • Infrastructure investment deferral: $2.3 billion potential savings
                    • Grid stabilization capabilities during renewable integration
                    
                    From "Electric Vehicle Readiness Policy - City of Orlando.pdf":
                    • Municipal adoption frameworks and policy guidelines
                    • Regulatory compliance with IEEE 1547 standards
                    • Environmental impact: 45% carbon emission reduction potential
                    
                    From policy and regulatory documents:
                    • Job creation: 12,000 estimated new positions in clean energy sector
                    • Economic development opportunities in manufacturing and installation
                    • Enhanced energy security through distributed storage network
                `,
                keyTopics: ["Grid integration", "Regulatory framework", "Economic impact", "Environmental benefits", "Policy alignment"]
            }
        };

        // Update interface based on selections
        document.getElementById('customerProfile').addEventListener('change', function() {
            const profile = this.value;
            const description = document.getElementById('profileDescription');
            const samplePromptsSection = document.getElementById('samplePromptsSection');
            const samplePromptsList = document.getElementById('samplePromptsList');
            const userPrompt = document.getElementById('userPrompt');
            
            if (profile && knowledgeLibrary[profile]) {
                description.textContent = `Focus: ${knowledgeLibrary[profile].focus}`;
                description.style.color = '#4CAF50';
                
                samplePromptsSection.style.display = 'block';
                samplePromptsList.innerHTML = '';
                
                samplePrompts[profile].forEach(prompt => {
                    const promptDiv = document.createElement('div');
                    promptDiv.className = 'sample-prompt';
                    promptDiv.textContent = prompt;
                    promptDiv.onclick = () => {
                        userPrompt.value = prompt;
                        userPrompt.focus();
                    };
                    samplePromptsList.appendChild(promptDiv);
                });
                
                if (samplePrompts[profile].length > 0) {
                    userPrompt.value = samplePrompts[profile][0];
                }
            } else {
                description.textContent = 'Select a profile to see relevant focus areas';
                description.style.color = '#666';
                samplePromptsSection.style.display = 'none';
                userPrompt.value = '';
            }
        });

        document.getElementById('contentFormat').addEventListener('change', function() {
            const format = this.value;
            const description = document.getElementById('formatDescription');
            const descriptions = {
                'tweet': 'Max 280 chars, hashtags, engaging & shareable',
                'reddit': 'Conversational tone, detailed explanation, community-focused',
                'newsletter': 'Comprehensive industry analysis with data and figures from documents',
                'video10sec': 'Punchy script, 25-30 words, high impact',
                'video10min': 'Comprehensive script with intro, body, conclusion'
            };
            
            if (format && descriptions[format]) {
                description.textContent = descriptions[format];
                description.style.color = '#4CAF50';
            } else {
                description.textContent = 'Select a format to see specifications';
                description.style.color = '#666';
            }
        });

        function getFormatRequirements(format) {
            const requirements = {
                'tweet': 'Maximum 280 characters including hashtags. Must be engaging and shareable. Include relevant hashtags like #BidirectionalCharging #EnergyIndependence #SmartGrid',
                'reddit': 'Casual conversational tone, detailed explanation, community-focused. Use emojis appropriately. Structure with clear paragraphs.',
                'newsletter': 'Professional newsletter format with comprehensive industry analysis. DO NOT start with greetings. Begin with subject line and executive summary. Include specific data points and figures from technical documents, market statistics, performance metrics, cost analysis with actual numbers. Use formal technical writing style.',
                'video10sec': 'Punchy script for 10-second video, approximately 25-30 words maximum. High impact, memorable message.',
                'video10min': 'Comprehensive script with introduction, main content sections, and strong conclusion. Include timing markers.'
            };
            return requirements[format] || 'Create engaging, informative content';
        }

        async function generateContent() {
            const customerProfile = document.getElementById('customerProfile').value;
            const contentFormat = document.getElementById('contentFormat').value;
            const userPrompt = document.getElementById('userPrompt').value;
            const resultSection = document.getElementById('resultSection');
            const resultContent = document.getElementById('resultContent');

            if (!customerProfile || !contentFormat || !userPrompt.trim()) {
                alert('Please select both dropdown options and enter your question!');
                return;
            }

            if (OPENAI_API_KEY === 'YOUR_API_KEY_HERE') {
                resultContent.innerHTML = '<div class="error-message">Please add your OpenAI API key to the code first!</div>';
                resultSection.style.display = 'block';
                return;
            }

            resultSection.style.display = 'block';
            resultContent.innerHTML = '<div class="loading">Generating tailored content with AI</div>';

            try {
                const content = await generateAIContent(customerProfile, contentFormat, userPrompt);
                resultContent.innerHTML = content;
            } catch (error) {
                resultContent.innerHTML = `<div class="error-message">Error generating content: ${error.message}</div>`;
            }
        }

        async function generateAIContent(profile, format, prompt) {
            const profileData = knowledgeLibrary[profile];
            
            const aiPrompt = `You are a bidirectional charging expert with access to comprehensive technical documentation. Create content for a ${profile} audience in ${format} format.

CUSTOMER PROFILE: ${profile}
FOCUS AREAS: ${profileData.focus}
KEY TOPICS: ${profileData.keyTopics.join(', ')}

DOCUMENT LIBRARY KNOWLEDGE:
${profileData.content}

USER REQUEST: ${prompt}

FORMAT REQUIREMENTS:
${getFormatRequirements(format)}

Create engaging, accurate content that draws from the document library data and speaks directly to this customer type.`;

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${OPENAI_API_KEY}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: 'gpt-4',
                    messages: [{ role: 'user', content: aiPrompt }],
                    max_tokens: 1500,
                    temperature: 0.7
                })
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status} - ${response.statusText}`);
            }

            const data = await response.json();
            
            if (data.error) {
                throw new Error(data.error.message);
            }

            return data.choices[0].message.content;
        }
    </script>
</body>
</html>